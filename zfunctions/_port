#compdef port

local state package_list

_arguments : \
  '(-d -q)-v[verbose mode]' \
  '(-v -q)-d[debug   mode]' \
  '(-v -d)-q[quiet   mode]' \
  '1:commend:((search:search
               variants:variants
               install:install
               uninstall:uninstall
               activate:activate
               deactivate:deactivate
               installed:installed
               sync:sync
               outdated:outdated
               upgrade:upgrade
               clean:clean
               list:list
               version:version
               selfupdate:selfupdate
               help:help))' \
  "2:packages:->package_list"

case "$state" in
  package_list)
    : ${(A)package_list::=${${(f)"$(port -q list 2>/dev/null)"}%% *}}
    _describe -t package_list 'package list' package_list
  ;;
esac

# vim: ft=zsh
